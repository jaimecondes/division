<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Clock</title>
<style>
  :root {
    --bg: #0f172a;    /* slate-900 */
    --fg: #e2e8f0;    /* slate-200 */
    --muted: #94a3b8; /* slate-400 */
    --accent: #38bdf8;/* sky-400 */
  }
  html,body{height:100%}
  body{
    margin:0; display:grid; place-items:center; background:var(--bg); color:var(--fg);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Noto Sans", Arial, "Apple Color Emoji", "Segoe UI Emoji";
  }
  .clock{
    text-align:center; padding:2.5rem 3rem; border-radius:1.25rem;
    background:rgba(255,255,255,0.04); backdrop-filter: blur(8px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.35);
  }
  .date{
    font-size:1rem; color:var(--muted); letter-spacing:.05em; margin-bottom:.5rem;
  }
  .time{
    font-size: clamp(2.5rem, 8vw, 6rem);
    line-height:1; font-weight:700;
    font-variant-numeric: tabular-nums; /* align digits nicely */
    letter-spacing: .02em;
  }
  .ampm{ font-size: .33em; vertical-align: super; color: var(--accent); margin-left:.25em }
  .controls{
    margin-top:1rem; display:flex; gap:.75rem; justify-content:center; flex-wrap:wrap;
  }
  button{
    background:#1e293b; color:var(--fg); border:1px solid #334155; border-radius:.75rem;
    padding:.5rem .9rem; cursor:pointer; font-weight:600;
  }
  button[aria-pressed="true"]{ border-color:var(--accent); color:var(--accent) }
</style>
</head>
<body>
  <main class="clock">
    <div id="date" class="date">—</div>
    <div class="time">
      <span id="time">00:00</span><span id="ampm" class="ampm"></span>
    </div>
    <div class="controls">
      <button id="toggle-24h" type="button" aria-pressed="false" title="Toggle 24-hour time">24-Hour</button>
      <button id="toggle-sec"  type="button" aria-pressed="true"  title="Toggle seconds">Seconds</button>
    </div>
  </main>

<script>
(() => {
  // State
  let use24Hour = false;
  let showSeconds = true;

  const elDate = document.getElementById('date');
  const elTime = document.getElementById('time');
  const elAmPm = document.getElementById('ampm');
  const btn24   = document.getElementById('toggle-24h');
  const btnSec  = document.getElementById('toggle-sec');

  // Render loop
  function render() {
    const now = new Date();
    // Date e.g., "Mon, Aug 18, 2025"
    elDate.textContent = new Intl.DateTimeFormat(navigator.language, {
      weekday: 'short', month: 'short', day: '2-digit', year: 'numeric'
    }).format(now);

    // Time (locale-aware)
    const opts = {
      hour: '2-digit',
      minute: '2-digit',
      second: showSeconds ? '2-digit' : undefined,
      hour12: !use24Hour
    };

    const formatted = new Intl.DateTimeFormat(navigator.language, opts).format(now);

    // If 12h, split AM/PM; some locales put it first—handle both cases.
    if (!use24Hour) {
      // Extract AM/PM by removing digits and separators from the formatted string
      const match = formatted.match(/(AM|PM|am|pm|a\.m\.|p\.m\.)/);
      if (match) {
        // remove AM/PM token from main time
        elTime.textContent = formatted.replace(match[0], '').trim();
        elAmPm.textContent = match[0].toUpperCase().replaceAll('.', '');
        elAmPm.style.display = '';
      } else {
        elTime.textContent = formatted;
        elAmPm.style.display = 'none';
      }
    } else {
      elTime.textContent = formatted;
      elAmPm.style.display = 'none';
    }
  }

  // Controls
  btn24.addEventListener('click', () => {
    use24Hour = !use24Hour;
    btn24.setAttribute('aria-pressed', String(use24Hour));
    render();
  });

  btnSec.addEventListener('click', () => {
    showSeconds = !showSeconds;
    btnSec.setAttribute('aria-pressed', String(showSeconds));
    render();
  });

  // Start
  render();
  // Align to next whole second to avoid drift at load.
  const msToNextSecond = 1000 - (Date.now() % 1000);
  setTimeout(() => {
    render();
    setInterval(render, 1000);
  }, msToNextSecond);
})();
</script>
</body>
</html>
